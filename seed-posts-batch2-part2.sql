-- =============================================
-- FreeCloud - Seed 8 Posts Pilar (Parte 2: Posts 10-13)
-- Ejecutar en Supabase SQL Editor o psql
-- =============================================

DO $$
DECLARE
  cat_excel   UUID;
  cat_python  UUID;
  cat_concreto UUID;
  cat_civil3d UUID;
BEGIN

  -- Asegurar que las categor√≠as existan
  INSERT INTO categories (name, slug, description, color, emoji) 
  VALUES ('Excel Ingenier√≠a', 'excel-ingenieria', 'Hojas de c√°lculo y VBA para ingenieros', '#10b981', 'üìä') ON CONFLICT (slug) DO NOTHING;
  
  INSERT INTO categories (name, slug, description, color, emoji) 
  VALUES ('Python', 'python', 'Desarrollo BIM y Scripts', '#f59e0b', 'üêç') ON CONFLICT (slug) DO NOTHING;

  INSERT INTO categories (name, slug, description, color, emoji) 
  VALUES ('Concreto Armado', 'concreto-armado', 'Dise√±o estructural E.060', '#6b7280', 'üèóÔ∏è') ON CONFLICT (slug) DO NOTHING;

  INSERT INTO categories (name, slug, description, color, emoji) 
  VALUES ('Civil 3D', 'civil-3d', 'Infraestructura y V√≠as', '#0ea5e9', 'üõ£Ô∏è') ON CONFLICT (slug) DO NOTHING;

  SELECT id INTO cat_excel    FROM categories WHERE slug = 'excel-ingenieria' LIMIT 1;
  SELECT id INTO cat_python   FROM categories WHERE slug = 'python'           LIMIT 1;
  SELECT id INTO cat_concreto FROM categories WHERE slug = 'concreto-armado'  LIMIT 1;
  SELECT id INTO cat_civil3d  FROM categories WHERE slug = 'civil-3d'         LIMIT 1;

-- ==============================================
-- POST 10: Excel Metrados de Obra
-- ==============================================
INSERT INTO posts (
  title, slug, content, excerpt, category_id, tags,
  meta_title, meta_description, key_question, key_answer,
  status, featured, author, reading_time, published_at
) VALUES (
  'Plantilla Excel Autom√°tica para Metrados de Obra (Norma Peruana)',
  'excel-plantilla-metrados-obra-automatica',
  E'## El Problema del Metrado Tradicional\n\nEl metrado es la columna vertebral del presupuesto base de cualquier proyecto de construcci√≥n. Un error aqu√≠ (omitir un muro, cruzar unidades de volumen por √°rea) puede significar la p√©rdida t√©cnica de miles de soles o la descalificaci√≥n de una licitaci√≥n p√∫blica.\n\nTradicionalmente, en Per√∫, los ingenieros de costos llenan s√°banas interminables en Excel calculando `N¬∞ Veces x Largo x Ancho x Alto = Parcial`. El problema principal no es la matem√°tica, sino **la trazabilidad de los cambios y el resumen din√°mico**.\n\nEn este art√≠culo t√©cnico, te ense√±aremos c√≥mo estructurar una Plantilla de Excel de alto rendimiento usando Tablas Din√°micas y macros ligeras (VBA) para automatizar el resumen de metrados seg√∫n la Norma T√©cnica de Metrados para Obras de Edificaci√≥n y Habilitaciones Urbanas (OE).\n\n---\n\n## Principios de una Plantilla Profesional\n\nOlv√≠date del t√≠pico archivo `Metrados_Final_Final_v4.xlsx` donde todo est√° hardcodeado. Una plantilla profesional debe ser una base de datos plana.\n\n### 1. Formato de "Tabla de Datos" (Tabular)\nEl principal error es hacer que el Excel se vea "bonito para imprimir" mientras se ingresan los datos. Debes separar el *Ingreso de Datos* de la *Presentaci√≥n*.\n\nTu hoja de c√°lculo base ("DATA_METRADO") debe tener estrictamente las siguientes columnas como encabezados ininterrumpidos:\n- `Item` (Ej. OE.2.1.1)\n- `Descripci√≥n de Partida` (Ej. Concreto f''c=210 kg/cm2 en Zapatas)\n- `Unidad` (m3, m2, m, und)\n- `Eje` \n- `Elemento` (Ej. Z-1)\n- `N¬∞ Veces`\n- `Largo`\n- `Ancho`\n- `Alto`\n- `Subtotal` (F√≥rmula inmutable: `=N*L*A*H`)\n\n> [!TIP]\n> Convierte este rango en una Tabla Oficial de Excel (Ctrl+T o Ctrl+Q). Esto permitir√° que las f√≥rmulas se autopueblen cuando agregues nuevas filas, y ser√° crucial para el Resumen Din√°mico.\n\n### 2. Formato Condicional Inteligente\nPara evitar errores humanos:\n- **Si Unidad = "m2":** La celda "Alto" debe pintarse de gris oscuro y bloquearse, indicando al operador que no debe ingresar un dato all√≠.\n- Esto se logra con Formato Condicional: `=G2="m2"` -> Formato Gris.\n\n---\n\n## Automatizando el Resumen General\n\nEl Resumen de Presupuesto requiere consolidar todos los Subtotales de una misma Partida. En lugar de hacer `=SUMAR.SI(...)` en mil celdas, usaremos **Tablas Din√°micas (Pivot Tables)**.\n\n### Pasos para el Resumen Din√°mico:\n1. Selecciona tu Tabla Oficial "DATA_METRADO".\n2. Ve a la pesta√±a *Insertar > Tabla Din√°mica*.\n3. Coloca la tabla en una nueva hoja llamada "RESUMEN_OE".\n4. En los campos de la tabla din√°mica arrastra:\n   - **Filas:** `Item`, luego `Descripci√≥n de Partida`, luego `Unidad`.\n   - **Valores:** `Subtotal` (Verifica que diga "Suma de Subtotal", no "Cuenta").\n\nVe a las opciones de dise√±o de la Tabla Din√°mica y selecciona "Mostrar en formato tabular" y "Repetir todas las etiquetas de elementos".\n¬°Listo! Ahora tienes un resumen perfecto, id√©ntico al formato S10, que se actualiza con un solo clic (Click Derecho > Actualizar) cada vez que el equipo de campo a√±ade nuevas zapatas o muros en la hoja de DATA.\n\n---\n\n## Macro (VBA) para Trazabilidad R√°pida\n\nSi quieres llevar tu plantilla al modo "Experto", agreguemos un peque√±o bot√≥n que inserte filas manteniendo las f√≥rmulas estructurales (algo que Excel a veces rompe).\n\nPresiona `Alt + F11` para abrir el editor VBA, inserta un M√≥dulo y pega esto:\n\n```vba\nSub InsertarFilaMetrado()\n    Dim ws As Worksheet\n    Set ws = ActiveSheet\n    \n    '' Asegurar que estamos dentro de la tabla\n    If Not Intersect(ActiveCell, ws.ListObjects("tblMetrados").DataBodyRange) Is Nothing Then\n        ActiveCell.ListObject.ListRows.Add (ActiveCell.Row - ws.ListObjects("tblMetrados").HeaderRowRange.Row + 1)\n    Else\n        MsgBox "Selecciona una celda dentro de la tabla de metrados primero.", vbExclamation\n    End If\nEnd Sub\n```\n\nPuedes asociar esta macro a un bot√≥n flotante llamado "A√±adir Elemento" o al atajo r√°pido `Ctrl+Shift+I`.\n\n---\n\n## Conclusi√≥n y Descarga\n\nMigrar de un metrado desorganizado "a la antigua" a un Metrado Tabular con Tablas Din√°micas te ahorrar√° decenas de horas al final del mes, sobre todo cuando llegan las temidas "versiones de modificaci√≥n de plano". \n\nAcostumbrarse a este rigor tabular es, adem√°s, el paso transicional perfecto antes de saltar al mundo de los Cuadros de Planificaci√≥n (Schedules) en BIM con Revit, ya que la l√≥gica de Base de Datos es exactamente la misma.',
  'Estructura una plantilla profesional de metrados en Excel usando tablas din√°micas y VBA para automatizar res√∫menes conforme a la Norma OE Peruana.',
  cat_excel,
  ARRAY['excel', 'metrados', 'costos', 'presupuesto', 'plantilla', 'vba', 'ingenieria-civil'],
  'Automatiza tus Metrados de Obra con esta Plantilla Excel Profesional',
  'Aprende a estructurar plantillas de metrados en Excel con Tablas Din√°micas y macros VBA. Base de datos tabular alineada a la normativa OE peruana.',
  '¬øC√≥mo hacer una plantilla autom√°tica de metrados en Excel?',
  'Para una plantilla autom√°tica, separa los datos (formato Tabular Oficial de Excel) del reporte. Usa Tablas Din√°micas para agrupar partidas OE autom√°ticamente, y suma subtotales por √≠tem sin usar funciones SUMAR.SI complejas, logrando velocidad y exactitud.',
  'published', false, 'Miguel Angel Rivera', 6, NOW()
) ON CONFLICT (slug) DO NOTHING;

-- ==============================================
-- POST 11: Revit API con Python
-- ==============================================
INSERT INTO posts (
  title, slug, content, excerpt, category_id, tags,
  meta_title, meta_description, key_question, key_answer,
  status, featured, author, reading_time, published_at
) VALUES (
  'Revit API y Python (pyRevit): El Siguiente Paso Despu√©s de Dynamo',
  'revit-api-python-pyrevit-programacion-bim',
  E'## El L√≠mite del "Visual Scripting"\n\nDynamo es maravilloso. Permite a los arquitectos e ingenieros realizar automatizaciones incre√≠bles sin saber escribir c√≥digo. Pero llega un punto, en modelos gigantescos de 5GB con links anidados, donde Dynamo se vuelve dolorosamente lento.\n\nEsa "sopa de fideos" de 300 nodos es dif√≠cil de mantener, dif√≠cil de compartir de manera estable (por problemas de versiones de paquetes de terceros) y sumamente exigente con la memoria RAM.\n\nAqu√≠ es donde entra **pyRevit y la Revit API**. \nSi Dynamo es andar en bicicleta el√©ctrica, la Revit API pura con C# es manejar un avi√≥n de combate. Y **Python** a trav√©s de pyRevit es el punto dulce de en medio: pilotar un auto deportivo autom√°tico.\n\n---\n\n## ¬øQu√© es pyRevit y Por Qu√© Deber√≠as Instalarlo Hoy?\n\n**pyRevit** (creado por el brillante Ehsan Iran-Nejad) es un complemento *Open Source* para Revit que act√∫a como una capa de compilaci√≥n r√°pida. Te permite crear tus propios botones nativos en la interfaz (Ribbon) de Revit, y que esos botones ejecuten scripts de Python instant√°neamente.\n\nSe acabaron los problemas de instalar paquetes a otros ingenieros. Solo compartes una carpeta en la red de tu oficina (Network Drive), y todos los Revit de tu empresa se actualizan autom√°ticamente con los nuevos botones m√°gicos que t√∫ creaste.\n\n---\n\n## Tu Primer Script en Python para Revit\n\nVamos a replicar un problema cl√°sico: Obtener la lista de todos los muros del proyecto y cambiar un par√°metro. \nHacer esto con la Revit API de Python es elegante y requere poqu√≠simas l√≠neas.\n\nEl lenguaje utilizado es IronPython (Python integrado en .NET).\n\n### El C√≥digo (Explicado)\n\n```python\n# Importar las bibliotecas fundamentales del n√∫cleo de Revit\nfrom Autodesk.Revit.DB import FilteredElementCollector, BuiltInCategory, Transaction\n\n# Obtener el acceso al documento actual (Modelo Activo)\ndoc = __revit__.ActiveUIDocument.Document\n\n# 1. EL RECOLECTOR (COLECTOR)\n# Esto es 10 veces m√°s r√°pido que buscar categor√≠as en Dynamo\nmuros = FilteredElementCollector(doc).OfCategory(BuiltInCategory.OST_Walls).WhereElementIsNotElementType().ToElements()\n\n# 2. LA TRANSACCI√ìN (Abrir modo edici√≥n)\nt = Transaction(doc, "Marcar Muros de Python")\nt.Start()\n\ncontador = 0\n# 3. EL BUCLE\nfor muro in muros:\n    parametro = muro.LookupParameter("Comments")\n    if parametro and not parametro.IsReadOnly:\n        parametro.Set("Modificado_Por_Python")\n        contador += 1\n\n# 4. GUARDAR CAMBIOS\nt.Commit()\n\nprint("√âxito. Se modificaron {} muros casi al instante.".format(contador))\n```\n\n### Desglosando la Magia:\n1. **FilteredElementCollector:** Es la base de todo c√°lculo r√°pido en la API. En lugar de cargar todos los elementos en memoria (como hace Dynamo a veces), este filtro act√∫a en la base de datos profunda C++ de Revit y extrae √∫nicamente los IDs de los muros en milisegundos.\n2. **Transactions:** Revit es a prueba de tontos. No te deja cambiar nada estructural del modelo a menos que "abras la b√≥veda" (Start Transaction) y "cierres la b√≥veda" (Commit). Esto protege el archivo de corrupciones.\n\n---\n\n## ¬øPor D√≥nde Empezar a Estudiar?\n\nLa curva de aprendizaje para la Revit API puede ser intimidante porque la documentaci√≥n oficial de Autodesk (apidocs.co) est√° escrita en C# y es extremadamente r√≠gida. Sin embargo, hacer la traducci√≥n mental a Python se vuelve natural con la pr√°ctica.\n\n**Mi hoja de ruta recomendada:**\n1. **Aprende Python B√°sico:** Listas, Diccionarios, Bucles For, Clases y Objetos (OOP). Curso gratis de YouTube es suficiente.\n2. **Descarga pyRevit y estudia su carpeta "extension":** Ehsan incluy√≥ docenas de botones pre-hechos (como el famoso "Make Pattern"). H√°zle click con `Alt + Shift + Click_izquierdo` a cualquier bot√≥n de pyRevit y se abrir√° su c√≥digo fuente. Lee c√≥mo lo hicieron.\n3. **Familiar√≠zate con RevitLookup:** Esta es una herramienta OBLIGATORIA. Es un bot√≥n que te permite explorar la "Matrix" detr√°s de cualquier elemento clickeando sobre √©l. Te dir√° los nombres internos (`BuiltInParameter`) que necesitas programar.\n4. **Foros:** El foro oficial de *DynamoBIM - Developer* y el foro de *pyRevit* son minas de oro donde expertos comparten fragmentos de c√≥digo diarios.\n\n---\n\n## Conclusi√≥n\n\nSaber Dynamo en 2024 te hace empleado muy atractivo. Saber programar directamente en la Revit API usando Python / C# en 2025/2026 te convierte en **irreemplazable**.\n\nCon pyRevit, puedes construir tus propios plugins corporativos, ahorr√°ndole a tu constructora licencias anuales de add-ins ajenos, centralizando los flujos de control de calidad y creando herramientas a la medida de la normativa nacional de tu pa√≠s.',
  'Supera las limitaciones de lentitud de Dynamo programando directamente la Revit API. Aprende a ejecutar scripts instant√°neos con IronPython y la extensi√≥n pyRevit.',
  cat_python,
  ARRAY['python', 'revit-api', 'pyrevit', 'programacion', 'bim', 'automatizacion', 'c#'],
  'Gu√≠a Definitiva de Programaci√≥n BIM: Revit API y Python (pyRevit)',
  'Aprende a programar macros y botones propios en Revit con Python y pyRevit para automatizar grandes modelos BIM evadiendo la lentitud y cuellos de botella de Dynamo.',
  '¬øCu√°l es la ventaja de usar la Revit API con Python sobre Dynamo?',
  'La Revit API mediante pyRevit ejecuta el c√≥digo (IronPython) de manera directa y significativamente m√°s r√°pida que el entorno visual de Dynamo, consume menos RAM en modelos inmensos y permite empaquetar botones en el Ribbon de Revit que toda la oficina puede usar sin ver cables o nodos.',
  'published', false, 'Miguel Angel Rivera', 9, NOW()
) ON CONFLICT (slug) DO NOTHING;

-- ==============================================
-- POST 12: Predimensionamiento E.060
-- ==============================================
INSERT INTO posts (
  title, slug, content, excerpt, category_id, tags,
  meta_title, meta_description, key_question, key_answer,
  status, featured, author, reading_time, published_at
) VALUES (
  'Predimensionamiento de Columnas y Vigas: Criterios Pr√°cticos Norma E.060',
  'predimensionamiento-columnas-vigas-e060-practico',
  E'## El Arte antes de la Computadora\n\nAntes de abrir ETABS y armar un modelo de Elementos Finitos, el ingeniero civil debe tener claro el esqueleto geom√©trico del edificio. Si ingresas al software vigas de 20x20 cm para luces de 8 metros, el programa no "explotar√°", te dar√° los resultados, pero las deflexiones y el armado de acero ser√°n completamente inviables. El c√°lculo iterativo ser√° un infierno.\n\nEl **Predimensionamiento** es la intuici√≥n ingenieril matem√°tica. Nos permite aproximarnos a las dimensiones finales estables de vigas, columnas y losas con un margen de error menor al 15%, ahorrando horas en redise√±o computacional.\n\nA continuaci√≥n, destilaremos las f√≥rmulas emp√≠ricas comprobadas y las recomendaciones de rigor basadas en la Norma Peruana de Concreto Armado E.060 y las pr√°cticas del maestro Ing. Antonio Blanco Blasco.\n\n---\n\n## 1. Predimensionamiento de Losas Aligeradas (NTE E.060)\n\nLas losas aligeradas (con viguetas en una o dos direcciones) son el sistema de piso m√°s com√∫n en edificaciones residenciales. La losa controla la deflexi√≥n masiva vertical.\n\n### Criterio de Peralte ($h$)\nLa f√≥rmula de bolsillo dictada por a√±os de pr√°ctica y amparada (de forma est√°tica) en la Tabla 9.1 de la E.060 es:\n\n> $h = \\frac{L_{uz\_libre}}{25}$ \n\n*Donde la luz libre es el tramo m√°s largo de apoyo a apoyo.* \n\n**Tabla Pr√°ctica Industrial Comercial:**\n- Para Luces $L$ ‚â§ 4.0 metros $\\to$ $h = 17$ cm\n- Para Luces $L$ ‚â§ 5.0 metros $\\to$ $h = 20$ cm *(El est√°ndar residencial peruano)*\n- Para Luces $L$ ‚â§ 6.0 metros $\\to$ $h = 25$ cm\n- Para Luces $L$ ‚â• 7.0 metros $\\to$ $h = 30$ cm *(Ya es muy pesada, considerar losa nervada o post-tensado)*\n\n---\n\n## 2. Predimensionamiento de Vigas\n\nLas vigas soportan los esfuerzos cortantes extremos y otorgan la rigidez lateral de p√≥rticos paralelos al plano del sismo. Su dimensi√≥n depende cr√≠ticamente del espacio libre (luz libre).\n\n### Peralte de la Viga ($h$)\nLa altura rige la inercia (Recordemos: Inercia $I = \\frac{b \\cdot h^3}{12}$). \n- **Vigas Principales** (Las que cargan peso de viguetas): $h = \\frac{L}{10}$ a $\\frac{L}{12}$\n- **Vigas Secundarias** (Amarre, sin carga tributaria importante): $h = \\frac{L}{12}$ a $\\frac{L}{14}$\n\n### Ancho de la Viga ($b$)\nAplicando la E.060 Cap√≠tulo 21 (Disposiciones especiales para el dise√±o s√≠smico), una viga que sea parte del sistema sismorresistente aporticado no debe tener un ancho menor a 25 cm para permitir adecuado detallado de nudos y traslapes.\n- **F√≥rmula de aproximaci√≥n:** $b = \\frac{h}{2}$\n\n**Ejemplo T√≠pico:** \nPara el pa√±o principal de una sala con un vano en X de 6 metros libres.\n$h = 6.0 / 10 = 0.60$ m (60 cm).\n$b = 0.60 / 2 = 0.30$ m (30 cm).\nSecci√≥n tentativa para el software ETABS: Viga de **$30 \\times 60$ cm**.\n\n---\n\n## 3. Predimensionamiento de Columnas\n\nEsta es la fase de mayor responsabilidad. Una columna sub-dimensionada en los primeros pisos causar√° un mecanismo de "piso blando" o colapso por carga axial l√≠mite.\n\nEl m√©todo japon√©s (basado en densidad de muros y √°rea tributaria) resumido en las notas de los proyectistas peruanos indica:\n\n### Paso 1: Obtener el √Årea Tributaria ($A_t$)\nEs el √°rea de influencia aleda√±a a la columna midiendo a la mitad la distancia en los vanos adyacentes hacia las otras columnas pr√≥ximas.\n\n### Paso 2: Calcular el Peso de Servicio Puntual ($P_s$)\nMultiplicamos $A_t$ por la cantidad total de pisos del edificio ($N$), por el Peso Estimado de categor√≠a ($P$).\n> $P_s = P \\cdot A_t \\cdot N$\n\n*Tasas emp√≠ricas de peso de edificaci√≥n (P):*\n- Categoria A (Hospitales/Cr√≠ticos): 1500 kg/$m^2$\n- Categoria B (Colegios/Cines): 1250 kg/$m^2$\n- Categoria C (Viviendas/Departamentos): 1000 kg/$m^2$\n\n### Paso 3: √Årea de Secci√≥n de Concreto de Columna ($A_g$)\nDepender√° fuertemente si es columna esqu√≠nera (m√°s carga de volcadura), interior (carga cuasi-axial conc√©ntrica) o perimetral.\n\n- **Columnas C√©ntricas (Interiores)**:\n  > $A_g = \\frac{P_s}{0.45 \\cdot f''_c}$\n- **Columnas Esquineras y Exteriores** (Demandan resistir m√°s sismo lateral, requieren m√°s √°rea por la excentricidad del flector basal):\n  > $A_g = \\frac{P_s}{0.35 \\cdot f''_c}$\n\n**Ejemplo R√°pido Columna Interior:** \nEdificio Multifamiliar (Cat C = 1000 kg/$m^2$) de 8 pisos ($N=8$). √Årea tributaria calculada = $16 m^2$. Concreto habitual $f''_c = 210$ kg/$cm^2$.\n\n1. Serv. Axial: $P_s = 1000 \\times 16 \\times 8 = 128,000$ kg\n2. Geometr√≠a Concreto: $A_g = \\frac{128,000}{0.45 \\times 210} = 1354.4$ $cm^2$\n3. Despeje de Dimensiones Cuadrado Lado: $\\sqrt{1354.4} \\approx 36.8$ cm.\n\n> Se debe redondear a m√∫ltiplos de 5 constructivamente en obra. Utilizaremos entonces para los niveles base del ETABS una columna predimensionada de **40 \\times 40 cm**.\n\n---\n\n## Recomendaciones Finales de Experiencia\n\nEl predimensionamiento provee un punto de partida para tu modelado 3D BIM (Revit y Robot/ETABS). Una vez corras el an√°lisis din√°mico s√≠smico (NTE E.030), es **altamente probable** que debas aumentar la rigidez de columnas laterales transform√°ndolas en "placas" (muros de corte, length mayor a 1.0 m) para controlar Derivas Inel√°sticas (Drift) menores a 0.007 del hormig√≥n. Nunca intentes bajar derivas puramente incrementando secciones cuadradas robustas enormes, desperdiciar√°s espacio arquitect√≥nico y sobrecargar√°s de masa el edificio atrayendo fuerzas inerciales mucho mayores perjudiciales.',
  'Ahorra horas de redise√±o computacional aplicando estas f√≥rmulas emp√≠ricas probadas de predimensionamiento de vigas, losas y columnas para la norma E.060.',
  cat_concreto,
  ARRAY['predimensionamiento', 'estructuras', 'concreto', 'vigas', 'columnas', 'e060', 'sismo'],
  'Gu√≠a R√°pida: Predimensionamiento Estructural en Concreto Armado',
  'Aprende a predimensionar vigas, losas aligeradas y columnas de concreto armado r√°pidamente cumpliendo la norma peruana E.060, paso previo indispensable para el modelo ETABS.',
  '¬øCu√°l es la f√≥rmula pr√°ctica para el predimensionamiento de columnas centrales en concreto?',
  'Para columnas centrales o interiores en edificaciones con normativas latinoamericanas, el √Årea requerida (Ag) es igual a Ps / (0.45 * fc), donde Ps es la Carga de Servicio (√ÅreaTributaria * PesoCategor√≠a * NumPisos).',
  'published', false, 'Miguel Angel Rivera', 7, NOW()
) ON CONFLICT (slug) DO NOTHING;

-- ==============================================
-- POST 13: Civil 3D Corredor Vial
-- ==============================================
INSERT INTO posts (
  title, slug, content, excerpt, category_id, tags,
  meta_title, meta_description, key_question, key_answer,
  status, featured, author, reading_time, published_at
) VALUES (
  'Civil 3D: Creaci√≥n del Primer Corredor Vial (Flujo de Trabajo DG-2018)',
  'civil-3d-crear-primer-corredor-vial-carreteras',
  E'## El Coraz√≥n del Dise√±o Geom√©trico de Carreteras\n\nAutodesk Civil 3D es el tit√°n internacional absoluto en infraestructura civil. A diferencia de AutoCAD convencional (una mesa de dibujo vectorial tonta), Civil 3D funciona con la l√≥gica del BIM param√©trico. El n√∫cleo de poder absoluto de este software se manifiesta al ensamblar los tres elementos geom√©tricos principales en una mega entidad 3D viva: **El Corredor Vial**.\n\nEn Per√∫, el est√°ndar regulatorio MTC del dise√±o de carreteras recae enteramente en el **Manual de Dise√±o Geom√©trico DG-2018**. En este extenso post, ensamblaremos paso a paso un corredor b√°sico respetando el esquema de datos jer√°rquicos del DG-2018.\n\n---\n\n## La Santa Trinidad del Corredor Vial\n\nUn ¬´Corridor¬ª en Civil 3D es simplemente la extrusi√≥n en 3D de una secci√≥n transversal arquitect√≥nica (Ensamblaje) inyectada a lo largo de un riel gu√≠a central bidimensional (Alineamiento) controlando su altura a los est√°ndares longitudinales precisos de perfil (Rasante).\n\nPara poder usar el legendario bot√≥n *"Create Corridor"*, necesitas indefectiblemente 3 cosas previas modeladas:\n\n### 1. ALINEAMIENTO (Alignment) - Componente XY - Horizontal\nEs la l√≠nea de ejes de tu carretera vista desde planta.\nCompuesta puramente por Tramos de Tangente, Curvas Circulares Simples o Espirales de Transici√≥n de curvatura (clotoides). \n- Se crea desde: `Home > Create Design > Alignment > Alignment Creation Tools`. \n- Al invocarlo en Per√∫, es crucial ligarlo a la pesta√±a *Design Criteria* usando la velocidad directriz reglamentada en la tabla 204.01 del DG-2018 para chequear din√°micamente el radio m√≠nimo ($R_{min}$) normativo, que por ejemplo ser√≠a $R_{min} = 30$ m para un terreno accidentado Tipo 3 a muy baja velocidad en trocha. El software emitir√° marcadores rojos si dibujaste radio de 25m.\n\n### 2. PERFIL DE RASANTE (Profile) - Componente Z - Vertical\nEs el dise√±o topogr√°fico longitudinal en "corte transversal gigante". Existen aqu√≠ dos gemelos, el Perfil del Terreno (Superficie T.N.) irregular y el **Perfil Rasante** (Design Profile) creado por el maquinista pavimentador que consta de progresivas subiendo con pendientes ($%S$) suavizadas y curvas parab√≥licas (c√≥ncavas/convexas verticales $K$).\n- Se crea trazando primero un *Profile View*, visualizando el relieve del TIN Surface nativo, para desp√∫es invocar: `Profile Creation Tools` para tirar tu poligonal vertical.\n- El DG-2018 (Cap√≠tulo 303) manda una pendiente longitudinal m√°xima del $8\\%$ en rutas normales. Configurar estos chequeos automatizados en los Criterios del Civil salvar√° tu integridad t√©cnica en revisiones finales del ministerio.\n\n### 3. ENSAMBLAJE T√çPICO (Assembly) - Componente 2D Plana - Transversal\nEs la silueta param√©trica de "rodajas del pastel" transversal como si rompieras el camino con un cuchillo filoso. Se construye usando los subensamblajes catalogados por Autodesk (Carril, Berma, Cuneta, Talud Daylight Condicional).\n\n1. Tecla Directa: Pulsa `CTRL + 3` en tu teclado para despertar la Tool Palettes.\n2. Inserte un pilar gu√≠a en vac√≠o: `Create Design -> Assembly -> Create Assembly`.\n3. Seleccione un Carril b√°sico desde las *Palettes* como "LaneSuperelevationAOR" e inj√©rtale los Valores DG-2018: Carril Bombeo transversal normal de $-2.0\\%$ o $-2.5\\%$ dependiendo severidad clim√°tica.\n4. Cuelga consecutivamente de √©l el Hombro Base (Berma), Cuneta rectangular/Trapecio y el importante eslab√≥n final "LinkSlopeToSurface" para proyectar pendientes variables extremas al encontrar corte monta√±oso natural.\n\n---\n\n## Creaci√≥n Final de Corredor Param√©trico Dimensional (The Magic)\n\nHabiendo completado nuestra tr√≠ada milagrosa a mano:\n\n1. V√© al comando supremo: `Ribbon Home -> Create Design -> Corridor`.\n2. Ponle un nombre de ingenier√≠a decente ("CR-ViaPrincipal-Norte").\n3. Rellena exactamente los cuadrantes presentados:\n   - **Alignment:** *(Selecciona tu pista dibujada Base).* \n   - **Profile:** *(Filtra por tu Perfil de dise√±o Rasante, ¬°NO SELECCIONES EL PERFIL DEL TERRENO! o la extrusi√≥n quedar√° a ras del piso irregular).* \n   - **Assembly:** *(Escoge tu silueta t√≠pica de bombeo creada previa).* \n   - **Target Surface:** *(Engancha la Topograf√≠a TIN Surface T.N. para que todos los taludes de excavaci√≥n "apunten" a clavar en el suelo existente).* \n4. Pulsar OK y en la ventana enorme final de `Corridor Parameters` clavar **Set All Targets** para validaciones si se tienen ensanches de curvas variables y marcar OK Final.\n5. Click m√°gico en **Rebuild the Corridor** (Regenerar Modelo Complejo).\n\nObservar√°s c√≥mo maravillosamente densas redes triangulares complejas con l√≠neas longitudinales y cruces (Feature Lines 3D) cubren la vista isom√©trica superior rebanando los cerros o rellenando las depresiones, acoplando peralte suave longitudinal.\n\n---\n\n## Exportaci√≥n y An√°lisis Inmediatos Potentes de Civil\n\nTras regenerar, el software contiene datos densos. De inmediato puedes solicitar a la base la Surface Volum√©trica C√∫bica de Terreno, produciendo as√≠ reportes crudos autom√°ticos de **Volumen de Movimiento de Tierras (Corte Cuantificable Civil) y Volumen en Relleno**. En el MTC de Per√∫, esta parte define todo el Presupuesto Costo Meta final del contratista.\n\nCon un click derecho, invoca el m√≥dulo poderoso interno *"Drive"*. Ver√°s en pantalla isom√©trica 3D la vista de conducci√≥n en t√∫nel simulando manejar en tu propia carretera reci√©n dise√±ada comprobando √°ngulos ciegos de visibilidad y radios defectuosos.\n¬°Ese es el dominio indiscutible del BIM Horizontal infraestructural moderno!',
  'Aprende a ensamblar tu primer corredor vial en AutoCAD Civil 3D integrando Alineamientos, Perfiles Rasantes y Ensambles respetando la Norma MTC DG-2018 de Per√∫.',
  cat_civil3d,
  ARRAY['civil-3d', 'carreteras', 'mtc', 'dg-2018', 'corredor-vial', 'topografia', 'vias'],
  'Gu√≠a Civil 3D B√°sica: La Trinidad para el Corredor Vial',
  'Aprende a ensamblar t√∫ primer corredor vial avanzado en Autodesk Civil 3D en simples pasos usando Alineamientos, Perfil Rasante vertical y Assembly transversal param√©trico.',
  '¬øCuales son los tres elementos requeridos para hacer un Corredor en Civil 3D?',
  'Para crear un Corridor o Corredor Vial se necesita indispensablemente: (1) El Alineamiento Horizontal o Planta, (2) El Perfil longitudinal o de Elevaci√≥n Rasante de Dise√±o, y (3) El Ensamblaje o Secci√≥n Transversal t√≠pica (Assembly).',
  'published', false, 'Miguel Angel Rivera', 9, NOW()
) ON CONFLICT (slug) DO NOTHING;

END
$$;
